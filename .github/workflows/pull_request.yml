name: PR Verification

on:
  pull_request:

jobs:
  verification:
    env:
      GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
    permissions:
      contents: write
    strategy:
      fail-fast: false
      matrix:
        platform: [ windows-latest ]

    runs-on: ${{ matrix.platform }}
    steps:
      - uses: actions/checkout@v3
      - name: Setup .NET
        uses: actions/setup-dotnet@v4
        with:
            dotnet-version: 9.0
      - name: Build .NET project
        run: dotnet build --configuration Release ./server-mod/GiveUISolution.sln
      - name: setup bun
        uses: oven-sh/setup-bun@v2
        with:
          bun-version: latest
      - name: Build wails
        uses: dAppServer/wails-build-action@756cb1ac7fe5611f1e3bac6f0d83225ff9e87421
        with:
          package: false
          go-version: '1.23.1'
          build-name: spt-give-ui.exe
          build-platform: windows/amd64
          wails-build-webview2: embed
